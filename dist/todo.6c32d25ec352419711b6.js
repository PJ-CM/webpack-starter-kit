(()=>{"use strict";var e=function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=(new Date).getTime(),this.name=t,this.isComplete=!1,this};function t(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}console.log;var a=document,i=JSON,n=localStorage,s=function(){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.key=e,n.getItem(this.key)||n.setItem(this.key,i.stringify([])),this.addTask=this.addTask.bind(this),this.editTask=this.editTask.bind(this),this.removeTask=this.removeTask.bind(this),this.completeTask=this.completeTask.bind(this)}var r,c,o;return r=s,(c=[{key:"addTask",value:function(t){if(t.target.value){if(13===t.keyCode){var a=new e(t.target.value),s=i.parse(n.getItem(this.key));s.push(a),n.setItem(this.key,i.stringify(s)),t.target.value=null,this.renderTask(a)}}else alert("No es posible agregar una tarea vac√≠a.")}},{key:"editTask",value:function(e){var t=this;if(e.target.matches("label")){var s=i.parse(n.getItem(this.key)),r=s.findIndex((function(t){return t.name===e.target.textContent})),c=a.querySelector('[data-id="'.concat(s[r].id,'"]')),o=function(e){e.target.textContent=s[r].name=e.target.textContent,e.target.blur(),n.setItem(t.key,i.stringify(s))};c.addEventListener("blur",(function(e){return o(e)})),c.addEventListener("keyup",(function(e){return 13===e.keyCode&&o(e)}))}}},{key:"removeTask",value:function(e){if(e.target.matches("a")){var t=i.parse(n.getItem(this.key)),a=t.findIndex((function(t){return t.id.toString()===e.target.dataset.id}));t.splice(a,1),n.setItem(this.key,i.stringify(t)),e.target.parentElement.remove()}}},{key:"completeTask",value:function(e){if(e.target.matches('input[type="checkbox"]')){var t=i.parse(n.getItem(this.key)),s=t.findIndex((function(t){return t.id.toString()===e.target.id})),r=a.getElementById("trash-".concat(t[s].id));e.target.checked?(e.target.parentElement.classList.add("complete"),t[s].isComplete=!0,r.classList.remove("not-completed")):(e.target.parentElement.classList.remove("complete"),t[s].isComplete=!1,r.classList.add("not-completed")),n.setItem(this.key,i.stringify(t))}}},{key:"renderTask",value:function(e){var t='\n      <li class="List-item '.concat(e.isComplete?"complete":"",'">\n        <input class="List-checkbox" type="checkbox" id="').concat(e.id,'" ').concat(e.isComplete?"checked":"",'>\n        <label class="List-label" data-id="').concat(e.id,'" contenteditable spellcheck>').concat(e.name,'</label>\n        <a href="#" id="trash-').concat(e.id,'" data-id="').concat(e.id,'" class="List-removeLink ').concat(e.isComplete?"":"not-completed",'">üóëÔ∏è</a>\n      </li>\n    ');list.insertAdjacentHTML("beforeend",t)}},{key:"render",value:function(){var e=this,t=i.parse(n.getItem(this.key)),s=list.children;t.forEach((function(t){return e.renderTask(t)})),Array.from(s).forEach((function(s){s.querySelector('input[type="checkbox"]').addEventListener("change",(function(s){var r=t.filter((function(e){return e.id==s.target.id})),c=a.getElementById("trash-".concat(r[0].id));s.target.checked?(s.target.parentElement.classList.add("complete"),r[0].isComplete=!0,c.classList.remove("not-completed")):(s.target.parentElement.classList.remove("complete"),r[0].isComplete=!1,c.classList.add("not-completed")),n.setItem(e.key,i.stringify(t))}))})),task.addEventListener("keyup",this.addTask),list.addEventListener("click",this.editTask),list.addEventListener("click",this.removeTask),list.addEventListener("click",this.completeTask)}}])&&t(r.prototype,c),o&&t(r,o),s}(),r=document,c=r.getElementById("app"),o=r.createElement("input"),l=r.createElement("ul"),d=new s("miLista");o.id="task",o.classList.add("Task"),o.spellcheck=!0,o.placeholder="Tarea por hacer...",l.id="list",l.classList.add("List"),c.classList.add("ToDo"),c.appendChild(o),c.appendChild(l),d.render()})();